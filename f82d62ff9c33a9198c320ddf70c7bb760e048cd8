{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4f0e12d3_bb7b0399",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2023-03-23T11:55:43Z",
      "side": 1,
      "message": "Getting SELinux denials on payload verification: https://cpaste.org/?c56b27203767e982#AaC6yzoGPyhd45MRpndLcvHpi1zoJ9DKuPsqZa9q5oyd",
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3d312cf_6c43128b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-03-23T13:22:24Z",
      "side": 1,
      "message": "Huh, one would\u0027ve thought that update_engine would work.",
      "parentUuid": "4f0e12d3_bb7b0399",
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91a32223_36ee8867",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-03-23T13:29:53Z",
      "side": 1,
      "message": "The app is calling `updateEngine.verifyPayloadMetadata` which ends up at https://cs.android.com/android/platform/superproject/+/android-13.0.0_r31:system/update_engine/aosp/update_attempter_android.cc;l\u003d516;bpv\u003d1;bpt\u003d0\n\nIt does a simple open, I don\u0027t know why it ends up with\n\n```\nW update_engine: type\u003d1400 audit(0.0:28): avc: denied { dac_read_search } for capability\u003d2 scontext\u003du:r:update_engine:s0 tcontext\u003du:r:update_engine:s0 tclass\u003dcapability permissive\u003d0\nW update_engine: type\u003d1400 audit(0.0:29): avc: denied { dac_override } for capability\u003d1 scontext\u003du:r:update_engine:s0 tcontext\u003du:r:update_engine:s0 tclass\u003dcapability permissive\u003d0\n```\n\n\nCan you `ls -lZ /data/ota_package/payload_metadata.bin`",
      "parentUuid": "b3d312cf_6c43128b",
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "998195d6_e4f98599",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2023-03-23T13:33:41Z",
      "side": 1,
      "message": "```\n-rw------- 1 u0_a138 u0_a138 u:object_r:ota_package_file:s0:c512,c768  96066 2023-03-23 19:02 /data/ota_package/payload_metadata.bin\n\n```",
      "parentUuid": "91a32223_36ee8867",
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2687123e_b993f061",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2023-03-23T13:47:10Z",
      "side": 1,
      "message": "Ok, it\u0027s a file permissions issue. I tried `metadataFile.setReadable(true, false)` method to make it world readable worked. Though I am unsure, we want to do that even if the file gets deleted immediately after verification.",
      "parentUuid": "998195d6_e4f98599",
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3c70c294_7f9b34ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-03-28T17:01:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2687123e_b993f061",
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd3b64ff_5fc5f998",
        "filename": "common/private/seapp_contexts",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000065
      },
      "writtenOn": "2023-03-23T12:02:58Z",
      "side": 1,
      "message": "Should this be ota_package_file?",
      "range": {
        "startLine": 2,
        "startChar": 80,
        "endLine": 2,
        "endChar": 94
      },
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33521ba6_66949794",
        "filename": "common/private/seapp_contexts",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-03-23T13:22:24Z",
      "side": 1,
      "message": "No.",
      "parentUuid": "cd3b64ff_5fc5f998",
      "range": {
        "startLine": 2,
        "startChar": 80,
        "endLine": 2,
        "endChar": 94
      },
      "revId": "f82d62ff9c33a9198c320ddf70c7bb760e048cd8",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}